#+TITLE: yolo - Implementation TODO
#+AUTHOR: Claude
#+STARTUP: overview

* MVP Implementation
** Script Skeleton
*** DONE Create yolo script file with shebang and basic structure
*** DONE Add --help flag with usage text
*** DONE Parse command-line arguments (--tree, --create, --new)
*** DONE Implement argument validation

** Guards and Validations
*** DONE Check if already inside tmux (refuse if $TMUX is set)
*** DONE Detect git root (traverse up to find .git)
*** DONE Validate --tree is inside git repo
*** DONE Validate --create is NOT inside git repo
*** DONE Check if target directory already exists
*** DONE Warn if .devcontainer/ already exists

** Secrets Management
*** DONE Check if `pass` command is available
*** DONE Fetch secrets from pass if available
*** DONE Fallback to environment variables
*** DONE Export ANTHROPIC_API_KEY and OPENAI_API_KEY

** Random Name Generation
*** DONE Define adjective word list
*** DONE Define noun word list
*** DONE Implement random adjective-noun generator function

** Template System
*** DONE Define devcontainer.json template with PROJECT_NAME placeholder
*** DONE Define Dockerfile template
*** DONE Implement template copy with placeholder substitution
*** DONE Create .devcontainer/ directory if missing

** Default Mode (no flags)
*** DONE Navigate to git root if in subdirectory
*** DONE Bootstrap .devcontainer/ if missing
*** DONE Build container name from project directory
*** DONE Start devcontainer with `devcontainer up`
*** DONE Execute into container with tmux attach/create

** --tree [NAME] Mode
*** DONE Extract NAME from argument (or generate random)
*** DONE Compute worktree path: ../PROJECT-worktrees/NAME
*** DONE Create worktrees directory if needed
*** DONE Run `git worktree add` with new branch
*** DONE Copy .devcontainer/ to worktree
*** DONE Build container name: project-worktreename
*** DONE Start devcontainer in worktree directory
*** DONE Execute into container with tmux

** --create NAME Mode
*** DONE Validate NAME argument is provided
*** DONE Create directory NAME
*** DONE Initialize git repo in new directory
*** DONE Scaffold .devcontainer/ from template
*** DONE Build container name from NAME
*** DONE Start devcontainer
*** DONE Execute into container with tmux

** --new Flag
*** DONE Add --remove-existing-container to devcontainer up command
*** DONE Ensure --new combines with other modes

** Container Execution
*** DONE Implement devcontainer up wrapper
*** DONE Implement devcontainer exec with tmux command
*** DONE Handle "container already running" case (just attach)

** Testing
*** DONE Test default mode in git repo root
*** DONE Test default mode in git repo subdirectory
*** DONE Test default mode with missing .devcontainer/
*** DONE Test --tree with NAME
*** DONE Test --tree without NAME (random generation)
*** DONE Test --tree outside git repo (should fail)
*** DONE Test --create with NAME
*** DONE Test --create inside git repo (should fail)
*** DONE Test --create with existing directory (should fail)
*** DONE Test --new flag
*** DONE Test tmux nesting guard
*** DONE Test pass fallback to env vars

* Future Enhancements (Not MVP)
** --stop Flag
*** TODO Stop container for current project
*** TODO Determine container name from current directory

** --list Flag
*** TODO List running devcontainers
*** TODO List worktrees for current project
*** TODO Format output nicely

** --attach Flag
*** TODO Explicit attach to running container
*** TODO Error if container not running

** --detach / -d Flag
*** TODO Start container without attaching
*** TODO Print container name/status

** --verbose Flag
*** TODO Add verbose logging throughout
*** TODO Print devcontainer commands being run
*** TODO Print git commands being run

** --prune Flag
*** TODO Find stopped containers for project
*** TODO Find stale/orphaned worktrees
*** TODO Prompt before deletion
*** TODO Clean up resources

** --from BRANCH Flag
*** TODO Accept --from BRANCH with --tree
*** TODO Create worktree from specified branch
*** TODO Validate branch exists

** Configuration Files
*** DONE Define config file format (TOML)
*** DONE Load ~/.config/yolo/config.toml if exists
*** DONE Load .yolo.toml from project root if exists
*** DONE Override defaults with config values
*** DONE Support base_image config
*** TODO Support default_shell config
*** DONE Support custom pass paths (pass_path_anthropic, pass_path_openai)

* Notes
** Container Naming
- Default: project directory name
- Worktree: projectname-worktreename
- Use lowercase, replace special chars

** Worktree Directory Structure
- Main project: /dev/myapp
- Worktrees: /dev/myapp-worktrees/NAME
- Each worktree gets its own .devcontainer copy

** tmux Session
- Session name: dev
- Command: tmux attach-session -t dev || tmux new-session -s dev
- Runs inside container via devcontainer exec

** Word Lists for Random Names
Adjectives: brave, swift, calm, bold, keen, wild, warm, cool, fair, wise
Nouns: panda, falcon, river, mountain, oak, wolf, hawk, cedar, fox, bear
